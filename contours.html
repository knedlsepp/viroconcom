<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Calculate probability contours &#8212; viroconcom 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fit your own data with fitting.py" href="fitting.html" />
    <link rel="prev" title="Installation" href="install.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="_static/mini_logo.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head><body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="index.html">viroconcom 0.1.0 documentation</a> &#187;</li>
          <li><a href="user_guide.html" accesskey="U">User Guide</a> &#187;</li> 
      </ul>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="calculate-probability-contours">
<h1>Calculate probability contours<a class="headerlink" href="#calculate-probability-contours" title="Permalink to this headline">¶</a></h1>
<p>The main use of this package is to create environmental contours. For this purpose one has to define a multivariate distribution, choose one of two calculation methods, and initiate the calculation.</p>
<p>This procedure can be further broken down into 8 steps:</p>
<ol class="arabic simple">
<li>Create a first, independent distribution.</li>
<li>Create another, (possibly) dependent distribution and define its dependency on the previous distributions.</li>
<li>Repeat step 2, until you have created the desired amount of distributions.</li>
<li>Bundle the created uni-variate distributions and the defined dependencies in a multivariate distribution.</li>
<li>Define the common parameters, return period and environmental state duration for the contour.</li>
<li>Choose one of the two calculation options: <a class="reference internal" href="api/contours.html#viroconcom.contours.HighestDensityContour" title="viroconcom.contours.HighestDensityContour"><code class="xref py py-class docutils literal notranslate"><span class="pre">HighestDensityContour</span></code></a> or <a class="reference internal" href="api/contours.html#viroconcom.contours.IFormContour" title="viroconcom.contours.IFormContour"><code class="xref py py-class docutils literal notranslate"><span class="pre">IFormContour</span></code></a>.</li>
<li>Define the calculation specific parameters.</li>
<li>Initiate the calculation.</li>
</ol>
<p>These steps are explained in more detail in the following.</p>
<div class="section" id="create-independent-distribution">
<span id="create-independent-dist"></span><h2>Create independent distribution<a class="headerlink" href="#create-independent-distribution" title="Permalink to this headline">¶</a></h2>
<p>Distributions are represented by the abstract class <a class="reference internal" href="api/distributions.html#viroconcom.distributions.Distribution" title="viroconcom.distributions.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>. This class is further subclassed by the abstract class <a class="reference internal" href="api/distributions.html#viroconcom.distributions.ParametricDistribution" title="viroconcom.distributions.ParametricDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParametricDistribution</span></code></a>. Distributions of this kind are described by three parameters: <code class="docutils literal notranslate"><span class="pre">shape</span></code>, <code class="docutils literal notranslate"><span class="pre">loc</span></code>, and <code class="docutils literal notranslate"><span class="pre">scale</span></code>. Though not all distributions need to make use of all three parameters.</p>
<p>Currently there are 3 parametric distribution subclasses one can use to instantiate a distribution:</p>
<ul class="simple">
<li><a class="reference internal" href="api/distributions.html#viroconcom.distributions.WeibullDistribution" title="viroconcom.distributions.WeibullDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeibullDistribution</span></code></a></li>
<li><a class="reference internal" href="api/distributions.html#viroconcom.distributions.LognormalDistribution" title="viroconcom.distributions.LognormalDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">LognormalDistribution</span></code></a></li>
<li><a class="reference internal" href="api/distributions.html#viroconcom.distributions.NormalDistribution" title="viroconcom.distributions.NormalDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">NormalDistribution</span></code></a></li>
</ul>
<p>This table shows, which variables of the probability density function are are defined by specifying the scale, shape and location parameters:</p>
<div class="figure align-center" id="id1">
<img alt="Distributions implemented in viroconcom and their parameters." src="_images/distributions_with_parameters.png" />
<p class="caption"><span class="caption-text">Distributions implemented in viroconcom and their parameters.</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is also <a class="reference internal" href="api/distributions.html#viroconcom.distributions.KernelDensityDistribution" title="viroconcom.distributions.KernelDensityDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">KernelDensityDistribution</span></code></a>, which is a non-parametric distribution, that can only be instantiated by <a class="reference internal" href="fitting.html"><span class="doc">fitting</span></a>.</p>
</div>
<p>For the parameters there is the abstract class <a class="reference internal" href="api/params.html#viroconcom.params.Param" title="viroconcom.params.Param"><code class="xref py py-class docutils literal notranslate"><span class="pre">Param</span></code></a>. As we want to create an independet distribution, we use the subclass <a class="reference internal" href="api/params.html#viroconcom.params.ConstantParam" title="viroconcom.params.ConstantParam"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstantParam</span></code></a> to define <code class="docutils literal notranslate"><span class="pre">shape</span></code>, <code class="docutils literal notranslate"><span class="pre">loc</span></code>, and <code class="docutils literal notranslate"><span class="pre">scale</span></code>.</p>
<p>Say we want to create a weibull distribution with <code class="docutils literal notranslate"><span class="pre">shape=1.5</span></code>, <code class="docutils literal notranslate"><span class="pre">loc=1</span></code>, and <code class="docutils literal notranslate"><span class="pre">scale=3</span></code>.</p>
<p>We first create the parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shape</span> <span class="o">=</span> <span class="n">ConstantParam</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">loc</span> <span class="o">=</span> <span class="n">ConstantParam</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">scale</span> <span class="o">=</span> <span class="n">ConstantParam</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>And then create our weibull distribution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dist0</span> <span class="o">=</span> <span class="n">WeibullDistribution</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</pre></div>
</div>
<p>We also need to create a dependency tuple for creating a <code class="xref py py-class docutils literal notranslate"><span class="pre">MultivariateDistribution</span></code> later on. This is a 3-element tuple with either <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> as entries. The first entry corresponds to <code class="docutils literal notranslate"><span class="pre">shape</span></code>, the second to <code class="docutils literal notranslate"><span class="pre">loc</span></code> and the third to <code class="docutils literal notranslate"><span class="pre">scale</span></code>. For further information see <a class="reference internal" href="#create-dependent-dist"><span class="std std-ref">Create dependent distribution</span></a>. For an independent distribution all entries need to be set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dep0</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="create-dependent-distribution">
<span id="create-dependent-dist"></span><h2>Create dependent distribution<a class="headerlink" href="#create-dependent-distribution" title="Permalink to this headline">¶</a></h2>
<p>The dependency of a parametric distribution is described by the dependency of its parameters. In <a class="reference internal" href="#create-independent-dist"><span class="std std-ref">Create independent distribution</span></a> we used <a class="reference internal" href="api/params.html#viroconcom.params.ConstantParam" title="viroconcom.params.ConstantParam"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstantParam</span></code></a> for the parameters. There is also <a class="reference internal" href="api/params.html#viroconcom.params.FunctionParam" title="viroconcom.params.FunctionParam"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionParam</span></code></a>, that is callable which returns a parameter value depending on the value called with.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Actually <a class="reference internal" href="api/params.html#viroconcom.params.ConstantParam" title="viroconcom.params.ConstantParam"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstantParam</span></code></a> is a callable as well, which returns the same value, indepently of the value called with.</p>
</div>
<p>Say we have a random variable (RV) <span class="math notranslate">\(X\)</span> that is described by the distribution created in <a class="reference internal" href="#create-independent-dist"><span class="std std-ref">Create independent distribution</span></a>. We now want to create a dependent distribution that describes the random variable <span class="math notranslate">\(Y\)</span>, which is dependent on <span class="math notranslate">\(X\)</span>. We can do this by making the parameters of that distribution, dependent on the realizations <span class="math notranslate">\(x\)</span> of RV <span class="math notranslate">\(X\)</span>.</p>
<p>For this we first need to define an order of the distributions, so that we can determine on which distributions another may depend. We define this order, as the order in which the univariate distribution are later on passed to the <a class="reference internal" href="api/distributions.html#viroconcom.distributions.MultivariateDistribution" title="viroconcom.distributions.MultivariateDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultivariateDistribution</span></code></a> constructor. For now we use the order of creation. So the first in <a class="reference internal" href="#create-independent-dist"><span class="std std-ref">Create independent distribution</span></a> created weibull distribution has the index <code class="docutils literal notranslate"><span class="pre">0</span></code>. We use this order in the dependency tuples.</p>
<p>As already described in <a class="reference internal" href="#create-independent-dist"><span class="std std-ref">Create independent distribution</span></a> the 3 entries in the tuple correspond to the <code class="docutils literal notranslate"><span class="pre">shape</span></code>, <code class="docutils literal notranslate"><span class="pre">loc</span></code>,  and <code class="docutils literal notranslate"><span class="pre">scale</span></code> parameters and the entries are either <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code>. If an entry is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the corresponding parameter is not dependent. If an entry is an <code class="docutils literal notranslate"><span class="pre">int</span></code> the parameter depends on the distribution with that index, in the order defined above.</p>
<p>For example a dependency tuple of <code class="code docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">None,</span> <span class="pre">1)</span></code> means, that <code class="docutils literal notranslate"><span class="pre">shape</span></code> depends on the first distribution, <code class="docutils literal notranslate"><span class="pre">loc</span></code> is independent and <code class="docutils literal notranslate"><span class="pre">scale</span></code> depends on the second distribution.</p>
<p>We now want to create a dependent lognormal distribution. These distributions are often not described by <code class="docutils literal notranslate"><span class="pre">shape</span></code>, <code class="docutils literal notranslate"><span class="pre">loc</span></code>,  and <code class="docutils literal notranslate"><span class="pre">scale</span></code>, but by the mean <code class="docutils literal notranslate"><span class="pre">mu</span></code> and standard deviation <code class="docutils literal notranslate"><span class="pre">sigma</span></code> of the corresponding normal distribution and we want <code class="docutils literal notranslate"><span class="pre">mu</span></code> and <code class="docutils literal notranslate"><span class="pre">sigma</span></code> to depend on the prior created weibull distribution. The <code class="docutils literal notranslate"><span class="pre">loc</span></code> parameter is ignored by the <code class="xref py py-class docutils literal notranslate"><span class="pre">LognormalDistribution</span></code>.</p>
<p>The conversion is:</p>
<div class="math notranslate">
\[shape = sigma\]</div>
<div class="math notranslate">
\[scale = e^{mu}\]</div>
<p>But the class <code class="xref py py-class docutils literal notranslate"><span class="pre">LognormalDistribution</span></code> has also an alternative constructor for this case, which can be used by passing <code class="docutils literal notranslate"><span class="pre">mu</span></code> and <code class="docutils literal notranslate"><span class="pre">sigma</span></code> as keyword arguments.</p>
<p>The dependency can be described as follows, where <span class="math notranslate">\(x\)</span> is a realization of RV <span class="math notranslate">\(X\)</span>:</p>
<div class="math notranslate">
\[sigma(x) = 0.05 + 0.2 * e^{-0.2}\]</div>
<div class="math notranslate">
\[mu(x) = 0.1 + 1.5^{x * 0.2}\]</div>
<p>First we create the parameters as <a class="reference internal" href="api/params.html#viroconcom.params.FunctionParam" title="viroconcom.params.FunctionParam"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionParam</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_sigma</span> <span class="o">=</span> <span class="n">FunctionParam</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;f2&quot;</span><span class="p">)</span>
<span class="n">my_mu</span> <span class="o">=</span> <span class="n">FunctionParam</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we create the <code class="xref py py-class docutils literal notranslate"><span class="pre">LognormalDistribution</span></code> using the alternative constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dist1</span> <span class="o">=</span> <span class="n">LognormalDistribution</span><span class="p">(</span><span class="n">sigma</span><span class="o">=</span><span class="n">my_sigma</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">my_mu</span><span class="p">)</span>
</pre></div>
</div>
<p>And eventually define the dependency tuple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dep1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternativly we could have defined the distribution as follows, using the wrapper argument of the <a class="reference internal" href="api/params.html#viroconcom.params.FunctionParam" title="viroconcom.params.FunctionParam"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionParam</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shape</span> <span class="o">=</span> <span class="n">FunctionParam</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;f2&quot;</span><span class="p">)</span>
<span class="n">scale</span> <span class="o">=</span> <span class="n">FunctionParam</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">,</span> <span class="n">wrapper</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">exp</span><span class="p">)</span>
<span class="n">dist1</span> <span class="o">=</span> <span class="n">LognormalDistribution</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
<span class="n">dep1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="bundle-distributions-and-dependencies-in-a-multi-variate-distribution">
<span id="bundle-multvar-dist"></span><h2>Bundle distributions and dependencies in a multi-variate distribution<a class="headerlink" href="#bundle-distributions-and-dependencies-in-a-multi-variate-distribution" title="Permalink to this headline">¶</a></h2>
<p>To create a contour one usually needs a multi-dimensional distribution. Such a distribution can be represented by the <a class="reference internal" href="api/distributions.html#viroconcom.distributions.MultivariateDistribution" title="viroconcom.distributions.MultivariateDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultivariateDistribution</span></code></a> class.</p>
<p>To create a <a class="reference internal" href="api/distributions.html#viroconcom.distributions.MultivariateDistribution" title="viroconcom.distributions.MultivariateDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultivariateDistribution</span></code></a> we first have to bundle the distributions and dependencies in lists:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">distributions</span> <span class="o">=</span> <span class="p">[</span><span class="n">dist0</span><span class="p">,</span> <span class="n">dist1</span><span class="p">]</span>
<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="n">dep0</span><span class="p">,</span> <span class="n">dep1</span><span class="p">]</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="api/distributions.html#viroconcom.distributions.MultivariateDistribution" title="viroconcom.distributions.MultivariateDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultivariateDistribution</span></code></a> can now simply be created by passing these lists to the constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mul_dist</span> <span class="o">=</span> <span class="n">MultivariateDistribution</span><span class="p">(</span><span class="n">distributions</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Alternativly one can create the <a class="reference internal" href="api/distributions.html#viroconcom.distributions.MultivariateDistribution" title="viroconcom.distributions.MultivariateDistribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultivariateDistribution</span></code></a> iteratively, by first calling the constructor without arguments, and then passing the distributions and dependencies to the <code class="docutils literal notranslate"><span class="pre">add_distribution</span></code> method.
A combination of these two ways is possbible, as well.</p>
</div>
</div>
<div class="section" id="calculating-the-contour">
<h2>Calculating the contour<a class="headerlink" href="#calculating-the-contour" title="Permalink to this headline">¶</a></h2>
<p>One now has to define return period and state-duration and pick one of the two possible ways to calculate a contour.</p>
<ul class="simple">
<li><a class="reference internal" href="#iform"><span class="std std-ref">Inverse First-Order Reliabilty Method (IFORM)</span></a></li>
<li><a class="reference internal" href="#hdc"><span class="std std-ref">Highest Density Contour Method (HDC)</span></a></li>
</ul>
<dl class="docutils" id="return-period">
<dt>return period</dt>
<dd>The time between two environmental states that are not inside the contour, in years.</dd>
</dl>
<dl class="docutils" id="state-duration">
<dt>state duration</dt>
<dd>The time between two consecutive states, in hours.</dd>
</dl>
<div class="section" id="inverse-first-order-reliability-method-iform">
<span id="iform"></span><h3>Inverse First-Order Reliability Method (IFORM)<a class="headerlink" href="#inverse-first-order-reliability-method-iform" title="Permalink to this headline">¶</a></h3>
<p>To create an IFORM-contour one has to specify only the number of points to sample, in addition to return period and state duration.</p>
<p>So with the <a class="reference internal" href="#bundle-multvar-dist"><span class="std std-ref">previously created</span></a> <code class="docutils literal notranslate"><span class="pre">mul_dist</span></code> a contour with a <code class="docutils literal notranslate"><span class="pre">return_period</span></code> of <code class="docutils literal notranslate"><span class="pre">25</span></code> years , a <code class="docutils literal notranslate"><span class="pre">state_duration</span></code> of <code class="docutils literal notranslate"><span class="pre">3</span></code> hours and <code class="docutils literal notranslate"><span class="pre">n_samples=100</span></code> sampling points can be created like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iform_contour</span> <span class="o">=</span> <span class="n">IFormContour</span><span class="p">(</span><span class="n">mul_dist</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="highest-density-contour-method-hdc">
<span id="hdc"></span><h3>Highest Density Contour Method (HDC)<a class="headerlink" href="#highest-density-contour-method-hdc" title="Permalink to this headline">¶</a></h3>
<p>To create a highest density contour one has to specify a grid in variable space in addition to return period and state duration. This is done by passing the grid’s <code class="docutils literal notranslate"><span class="pre">limits</span></code> and <code class="docutils literal notranslate"><span class="pre">deltas</span></code> to the constructor. <code class="docutils literal notranslate"><span class="pre">limits</span></code> has to be a list of tuples containing the min and max limits for the variable space, one tuple for each dimension. <code class="docutils literal notranslate"><span class="pre">deltas</span></code> specifies the grid cell size. It is either a list of length equal to the number of dimension, containing the step size per dimensions or a scalar. If it is a scalar it is used for all dimensions.</p>
<p>The grid includes the min and max values: <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">[min,</span> <span class="pre">min</span> <span class="pre">+</span> <span class="pre">delta,</span> <span class="pre">...,</span> <span class="pre">max</span> <span class="pre">-</span> <span class="pre">delta,</span> <span class="pre">max]</span></code></p>
<p>To create a highest density contour for the <a class="reference internal" href="#bundle-multvar-dist"><span class="std std-ref">previously created</span></a> <code class="docutils literal notranslate"><span class="pre">mul_dist</span></code> with a <code class="docutils literal notranslate"><span class="pre">return_period</span></code> of <code class="docutils literal notranslate"><span class="pre">25</span></code> years and a <code class="docutils literal notranslate"><span class="pre">state_duration</span></code> of <code class="docutils literal notranslate"><span class="pre">3</span></code>,  we first define the variable space to be between 0 and 20 and set the step size to 0.5 in the first and 0.1 in the second dimension.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">limits</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span>
<span class="n">deltas</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]</span>
</pre></div>
</div>
<p>The contour can then be created as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hdens_contour</span> <span class="o">=</span> <span class="n">HighestDensityContour</span><span class="p">(</span><span class="n">mul_dist</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">limits</span><span class="p">,</span> <span class="n">deltas</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting-the-contour">
<h3>Plotting the contour<a class="headerlink" href="#plotting-the-contour" title="Permalink to this headline">¶</a></h3>
<p>To plot the contour one has be access the <code class="docutils literal notranslate"><span class="pre">coordinates</span></code> attribute of the contour.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be wary that the <code class="docutils literal notranslate"><span class="pre">coordinates</span></code> attribute is a list of arrays. With a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarrays</span></code> as entries and of length equal to the number of dimensions. Usually the outer list has a length of 1. But if a multimodal distribution was used the HDC may consist of multiple partial contours, each with its own entry in the outer list.</p>
</div>
<p>Using e.g. <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> the following code…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">iform_contour</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">iform_contour</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;IFORM&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">hdens_contour</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">hdens_contour</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Highest Density&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>creates this plot:</p>
<div class="figure" id="id2">
<a class="reference internal image-reference" href="_images/example_contours.png"><img alt="example contours plot" src="_images/example_contours.png" style="width: 768.0px; height: 576.0px;" /></a>
<p class="caption"><span class="caption-text">Plot of the calculated example contours.</span></p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Calculate probability contours</a><ul>
<li><a class="reference internal" href="#create-independent-distribution">Create independent distribution</a></li>
<li><a class="reference internal" href="#create-dependent-distribution">Create dependent distribution</a></li>
<li><a class="reference internal" href="#bundle-distributions-and-dependencies-in-a-multi-variate-distribution">Bundle distributions and dependencies in a multi-variate distribution</a></li>
<li><a class="reference internal" href="#calculating-the-contour">Calculating the contour</a><ul>
<li><a class="reference internal" href="#inverse-first-order-reliability-method-iform">Inverse First-Order Reliability Method (IFORM)</a></li>
<li><a class="reference internal" href="#highest-density-contour-method-hdc">Highest Density Contour Method (HDC)</a></li>
<li><a class="reference internal" href="#plotting-the-contour">Plotting the contour</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fitting.html"
                        title="next chapter">Fit your own data with fitting.py</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/contours.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fitting.html" title="Fit your own data with fitting.py"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, viroconcom.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
    </div>
  </body>
</html>